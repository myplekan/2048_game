var t=document.querySelectorAll(".field-cell"),e=document.querySelectorAll(".field-row"),r=document.querySelector(".start"),n=document.querySelector(".message-container"),o=document.querySelector(".game-score"),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function l(t){return Math.floor(Math.random()*t)}function i(){var t=l(10),e=l(4),r=l(4);if(0===a[e][r]){t<9?a[e][r]=2:a[e][r]=4;return}i()}function s(){for(var r=0,n=0;n<a.length;n++)for(var l=0;l<a.length;l++)e[n].cells[l].textContent=a[n][l],r+=a[n][l],"0"===e[n].cells[l].textContent&&(e[n].cells[l].textContent="");o.textContent=r,function(){for(var e=0,r=0;r<a.length;r++){for(var n=0;n<a.length-1;n++)0===a[r][n]&&e++,a[r][n]===a[r][n+1]&&a[r][n]>0&&e++;for(var o=[a[0][r],a[1][r],a[2][r],a[3][r]],l=0;l<o.length;l++)0===o[l]&&e++,o[l]===o[l+1]&&e++}0===e&&f("lose");var i=!0,s=!1,c=void 0;try{for(var u,h=t[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var d=u.value,v=d.classList.item(1);v&&d.classList.toggle(v),d.classList.add("field-cell--".concat(d.textContent)),d.classList.contains("field-cell--2048")&&f("win")}}catch(t){s=!0,c=t}finally{try{i||null==h.return||h.return()}finally{if(s)throw c}}}()}function c(t,e){if("ArrowDown"===e||"ArrowRight"===e)for(var r=t.length;r>=0;r--)t[r]===t[r-1]&&(t[r]+=t[r-1],t[r-1]=0);if("ArrowUp"===e||"ArrowLeft"===e)for(var n=0;n<t.length;n++)t[n]===t[n+1]&&(t[n]+=t[n+1],t[n+1]=0);return t.filter(function(t){return t>0})}function f(t){var e=!0,r=!1,o=void 0;try{for(var a,l=n.children[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var i=a.value;i.classList.contains("message-".concat(t))?i.classList.remove("hidden"):i.classList.add("hidden")}}catch(t){r=!0,o=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw o}}}document.addEventListener("keydown",function(t){if(!r.classList.contains("start"))switch(t.key){case"ArrowUp":case"ArrowDown":!function(t){for(var e=!1,r=0;r<a.length;r++)!function(r){var n=c([a[0][r],a[1][r],a[2][r],a[3][r]].filter(function(t){return 0!==t}),t);if("ArrowUp"===t)for(;n.length<4;)n.push(0);if("ArrowDown"===t)for(;n.length<4;)n.unshift(0);for(var o=0;o<a.length;o++)a[o][r]!==n[o]&&(e=!0),a[o][r]=n[o]}(r);e&&i(),s()}(t.key);break;case"ArrowRight":case"ArrowLeft":(function(t){for(var e=!1,r=0;r<a.length;r++)!function(r){var n=c(a[r].filter(function(t){return 0!==t}),t);if(n.length>=1){if("ArrowLeft"===t)for(;n.length<4;)n.push(0);if("ArrowRight"===t)for(;n.length<4;)n.unshift(0);for(var o=0;o<a.length;o++)a[r][o]!==n[o]&&(e=!0),a[r][o]=n[o]}}(r);e&&i(),s()})(t.key)}}),n.insertAdjacentHTML("beforeend",'\n  <p class="message message-restart hidden">\n    Press "Restart" to begin new game.\n  </p>\n'),r.addEventListener("click",function(t){r.classList.contains("start")&&(r.classList.remove("start"),r.classList.add("restart"),r.textContent="restart"),f("restart"),function(){for(var t=0;t<a.length;t++)for(var e=0;e<a.length;e++)a[t][e]=0}(),i(),i(),s()});
//# sourceMappingURL=index.d3530a08.js.map
